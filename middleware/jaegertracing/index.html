<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="Jaeger tracing middleware for Labstack Echo | Echo is a high performance, extensible, minimalist web framework for Go (Golang).">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@echo">
  <meta name="twitter:creator" content="@labstack">
  <meta name="twitter:title" content="Jaeger Tracing Middleware | Echo - High performance, minimalist Go web framework">
  <meta name="twitter:description" content="Jaeger tracing middleware for Labstack Echo | Echo is a high performance, extensible, minimalist web framework for Go (Golang).">
  <meta name="twitter:image" content="https://echo.labstack.com/images/share.png">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Jaeger Tracing Middleware">
  <meta property="og:title" content="Jaeger Tracing Middleware | Echo - High performance, minimalist Go web framework">
  <meta property="og:description" content="Jaeger tracing middleware for Labstack Echo | Echo is a high performance, extensible, minimalist web framework for Go (Golang).">
  <meta property="og:url" content="https://echo.labstack.com/">
  <meta property="og:image" content="https://echo.labstack.com/images/share.png">
  <title>
    Jaeger Tracing Middleware | Echo - High performance, minimalist Go web framework
  </title>
  <link rel="stylesheet"
    href="https://cdn.labstack.com/styles/icomoon.css">
  <link rel="stylesheet"
    href="https://unpkg.com/docsearch.js@2.2.1/dist/cdn/docsearch.min.css">
  <link rel="stylesheet" href="https://cdn.labstack.com/styles/w3.css">
  <link rel="stylesheet" href="https://cdn.labstack.com/styles/prism.css">
  <link rel="stylesheet" href="https://cdn.labstack.com/styles/base.css">
  <link rel="icon"
    type="image/png"
    href="https://cdn.labstack.com/images/labstack-icon.png">
</head>

<body class="docs">
	<div class="topnav">
  <nav class="w3-content">
    <a href="/"><img class="logo" src="https://cdn.labstack.com/images/echo-logo.svg" alt="Echo"></a>
    <span class="hide-small">
      <i class="fa fa-search w3-text-gray"></i>
      <input id="search-box" type="text" class="w3-input">
    </span>
    <span class="menu hide-small hide-medium">
      <a href="https://github.com/labstack/echo/discussions">Forum</a>
      <a href="https://gitter.im/labstack/echo">Chat</a>
    </span>
    <button class="hamburger hide-large" onclick="toggleSidenav()">
      <span></span>
    </button>
  </nav>
</div>

  <div class="w3-content">
    <nav class="sidenav2">
  <div class="w3-container">
    <ul class="menu-top menu-l1 hide-large">
      <li><a href="https://github.com/labstack/echo/discussions">Forum</a></li>
      <li><a href="https://gitter.im/labstack/echo">Chat</a></li>
    </ul>
    
    <ul class="menu-l1">
      
      <a href="/guide"><i class='fas fa-book'></i> Guide</a>
      <ul class="menu-l2">
        
        <li>
          <a href="/guide/installation">
             Installation
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/customization">
             Customization
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/binding">
             Binding
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/context">
             Context
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/cookies">
             Cookies
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/error-handling">
             Error Handling
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/http_server">
             HTTP(s) Server
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/ip-address">
             IP Address
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/migration">
             Migration
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/request">
             Request
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/response">
             Response
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/routing">
             Routing
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/static-files">
             Static Files
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/templates">
             Templates
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/guide/testing">
             Testing
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
      </ul>
      
      <a href="/middleware"><i class='fas fa-filter'></i> Middleware</a>
      <ul class="menu-l2">
        
        <li>
          <a href="/middleware/basic-auth">
             Basic Auth
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/body-dump">
             Body Dump
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/body-limit">
             Body Limit
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/casbin-auth">
             Casbin Auth
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/cors">
             CORS
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/csrf">
             CSRF
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/decompress">
             Decompress
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/gzip">
             Gzip
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a class="active" href="/middleware/jaegertracing">
             Jaeger
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/jwt">
             JWT
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/key-auth">
             Key Auth
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/logger">
             Logger
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/method-override">
             Method Override
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/prometheus">
             Prometheus
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/proxy">
             Proxy
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/rate-limiter">
             Rate Limiter
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/recover">
             Recover
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/redirect">
             Redirect
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/request-id">
             Request ID
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/rewrite">
             Rewrite
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/secure">
             Secure
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/session">
             Session
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/static">
             Static
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/timeout">
             Timeout
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/middleware/trailing-slash">
             Trailing Slash
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
      </ul>
      
      <a href="/cookbook"><i class='fas fa-code'></i> Cookbook</a>
      <ul class="menu-l2">
        
        <li>
          <a href="/cookbook/auto-tls">
             Auto TLS
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/cors">
             CORS
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/crud">
             CRUD
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/embed-resources">
             Embed Resources
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/file-download">
             File Download
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/file-upload">
             File Upload
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/google-app-engine">
             Google App Engine
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/graceful-shutdown">
             Graceful Shutdown
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/hello-world">
             Hello World
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/http2">
             HTTP/2
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/http2-server-push">
             HTTP/2 Server Push
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/jsonp">
             JSONP
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/jwt">
             JWT
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/load-balancing">
             Load Balancing
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/middleware">
             Middleware
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/reverse-proxy">
             Reverse Proxy
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/streaming-response">
             Streaming Response
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/subdomains">
             Subdomains
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/timeouts">
             Timeouts
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/twitter">
             Twitter
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
        <li>
          <a href="/cookbook/websocket">
             WebSocket
          </a>
          <ul class="menu-l3">
            
          </ul>
        </li>
        
      </ul>
      
    </ul>
  </div>
</nav>
    <div class="main">
      <div class="w3-container ad">
  <a href="https://code.labstack.com/new">
    <img
      style="margin-bottom: 8px;"
      src="https://echo.labstack.com//images/code.png"
      alt="Code - Multi-programming language playground"
    />
  </a>
  
</div>

      <div class="w3-row-padding">
        <div class="w3-col s12 m10 l10">
          



          <article class="content">
            <section>
              
              
                <style>
                    .hanchor {
                        font-size: 80%;
                        visibility: hidden;
                        color: silver;
                    }
                    h1:hover a, h2:hover a, h3:hover a, h4:hover a {
                        visibility: visible;
                    }
                </style>
              <ul class="breadcrumb">
                
                
                
                
                <li><a href='https://echo.labstack.com/middleware'>middleware</a></li>
                
                
                
                
                
                <li><a href='https://echo.labstack.com/middleware/jaegertracing'>jaegertracing</a></li>
                
                
                
                
                
                
              </ul>
              <h1>Jaeger Tracing Middleware</h1>
                <p>Trace requests on Echo framework with Jaeger Tracing Middleware.</p>
<p><em>Usage</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;github.com/labstack/echo-contrib/jaegertracing&#34;</span>
    <span style="color:#e6db74">&#34;github.com/labstack/echo/v4&#34;</span>
)
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">echo</span>.<span style="color:#a6e22e">New</span>()
    <span style="color:#75715e">// Enable tracing middleware
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">jaegertracing</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">e</span>, <span style="color:#66d9ef">nil</span>)
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Close</span>()

    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Start</span>(<span style="color:#e6db74">&#34;:1323&#34;</span>))
}
</code></pre></div><p>Enabling the tracing middleware creates a tracer and a root tracing span for every request.</p>
<h2 id="custom-configuration">Custom Configuration<a href="#custom-configuration" class="hanchor" ariaLabel="Anchor"> 🔗</a> </h2>
<p>By default, traces are sent to <code>localhost</code> Jaeger agent instance. To configure an external Jaeger, start your application with environment variables.</p>
<p><em>Usage</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ JAEGER_AGENT_HOST<span style="color:#f92672">=</span>192.168.1.10 JAEGER_AGENT_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">6831</span> ./myserver
</code></pre></div><p>The tracer can be initialized with values coming from environment variables. None of the env vars are required
and all of them can be overriden via direct setting of the property on the configuration object.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>JAEGER_SERVICE_NAME</td>
<td>The service name</td>
</tr>
<tr>
<td>JAEGER_AGENT_HOST</td>
<td>The hostname for communicating with agent via UDP</td>
</tr>
<tr>
<td>JAEGER_AGENT_PORT</td>
<td>The port for communicating with agent via UDP</td>
</tr>
<tr>
<td>JAEGER_ENDPOINT</td>
<td>The HTTP endpoint for sending spans directly to a collector, i.e. http://jaeger-collector:14268/api/traces</td>
</tr>
<tr>
<td>JAEGER_USER</td>
<td>Username to send as part of &ldquo;Basic&rdquo; authentication to the collector endpoint</td>
</tr>
<tr>
<td>JAEGER_PASSWORD</td>
<td>Password to send as part of &ldquo;Basic&rdquo; authentication to the collector endpoint</td>
</tr>
<tr>
<td>JAEGER_REPORTER_LOG_SPANS</td>
<td>Whether the reporter should also log the spans</td>
</tr>
<tr>
<td>JAEGER_REPORTER_MAX_QUEUE_SIZE</td>
<td>The reporter&rsquo;s maximum queue size</td>
</tr>
<tr>
<td>JAEGER_REPORTER_FLUSH_INTERVAL</td>
<td>The reporter&rsquo;s flush interval, with units, e.g. &ldquo;500ms&rdquo; or &ldquo;2s&rdquo; ([valid units][timeunits])</td>
</tr>
<tr>
<td>JAEGER_SAMPLER_TYPE</td>
<td>The sampler type</td>
</tr>
<tr>
<td>JAEGER_SAMPLER_PARAM</td>
<td>The sampler parameter (number)</td>
</tr>
<tr>
<td>JAEGER_SAMPLER_MANAGER_HOST_PORT</td>
<td>The HTTP endpoint when using the remote sampler, i.e. http://jaeger-agent:5778/sampling</td>
</tr>
<tr>
<td>JAEGER_SAMPLER_MAX_OPERATIONS</td>
<td>The maximum number of operations that the sampler will keep track of</td>
</tr>
<tr>
<td>JAEGER_SAMPLER_REFRESH_INTERVAL</td>
<td>How often the remotely controlled sampler will poll jaeger-agent for the appropriate sampling strategy, with units, e.g. &ldquo;1m&rdquo; or &ldquo;30s&rdquo; ([valid units][timeunits])</td>
</tr>
<tr>
<td>JAEGER_TAGS</td>
<td>A comma separated list of <code>name = value</code> tracer level tags, which get added to all reported spans. The value can also refer to an environment variable using the format <code>${envVarName:default}</code>, where the <code>:default</code> is optional, and identifies a value to be used if the environment variable cannot be found</td>
</tr>
<tr>
<td>JAEGER_DISABLED</td>
<td>Whether the tracer is disabled or not. If true, the default <code>opentracing.NoopTracer</code> is used.</td>
</tr>
<tr>
<td>JAEGER_RPC_METRICS</td>
<td>Whether to store RPC metrics</td>
</tr>
</tbody>
</table>
<p>By default, the client sends traces via UDP to the agent at <code>localhost:6831</code>. Use <code>JAEGER_AGENT_HOST</code> and
<code>JAEGER_AGENT_PORT</code> to send UDP traces to a different <code>host:port</code>. If <code>JAEGER_ENDPOINT</code> is set, the client sends traces
to the endpoint via <code>HTTP</code>, making the <code>JAEGER_AGENT_HOST</code> and <code>JAEGER_AGENT_PORT</code> unused. If <code>JAEGER_ENDPOINT</code> is
secured, HTTP basic authentication can be performed by setting the <code>JAEGER_USER</code> and <code>JAEGER_PASSWORD</code> environment
variables.</p>
<h3 id="middleware-skipper">Middleware Skipper<a href="#middleware-skipper" class="hanchor" ariaLabel="Anchor"> 🔗</a> </h3>
<p>A middleware skipper can be passed to avoid tracing spans to certain URLs:</p>
<p><em>Usage</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;strings&#34;</span>
    <span style="color:#e6db74">&#34;github.com/labstack/echo-contrib/jaegertracing&#34;</span>
    <span style="color:#e6db74">&#34;github.com/labstack/echo/v4&#34;</span>
)

<span style="color:#75715e">// urlSkipper ignores metrics route on some middleware
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">urlSkipper</span>(<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">echo</span>.<span style="color:#a6e22e">Context</span>) <span style="color:#66d9ef">bool</span> {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">HasPrefix</span>(<span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Path</span>(), <span style="color:#e6db74">&#34;/testurl&#34;</span>) {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
    }
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">echo</span>.<span style="color:#a6e22e">New</span>()
    <span style="color:#75715e">// Enable tracing middleware
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">jaegertracing</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">e</span>, <span style="color:#a6e22e">urlSkipper</span>)
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Close</span>()

    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Start</span>(<span style="color:#e6db74">&#34;:1323&#34;</span>))
}
</code></pre></div><h3 id="tracefunction">TraceFunction<a href="#tracefunction" class="hanchor" ariaLabel="Anchor"> 🔗</a> </h3>
<p>This is a wrapper function that can be used to seamlessly add a span for
the duration of the invoked function. There is no need to change function arguments.</p>
<p><em>Usage</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;github.com/labstack/echo-contrib/jaegertracing&#34;</span>
    <span style="color:#e6db74">&#34;github.com/labstack/echo/v4&#34;</span>
    <span style="color:#e6db74">&#34;net/http&#34;</span>
    <span style="color:#e6db74">&#34;time&#34;</span>
)
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">echo</span>.<span style="color:#a6e22e">New</span>()
    <span style="color:#75715e">// Enable tracing middleware
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">jaegertracing</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">e</span>, <span style="color:#66d9ef">nil</span>)
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Close</span>()
    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">GET</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">echo</span>.<span style="color:#a6e22e">Context</span>) <span style="color:#66d9ef">error</span> {
        <span style="color:#75715e">// Wrap slowFunc on a new span to trace it&#39;s execution passing the function arguments
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">jaegertracing</span>.<span style="color:#a6e22e">TraceFunction</span>(<span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">slowFunc</span>, <span style="color:#e6db74">&#34;Test String&#34;</span>)
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StatusOK</span>, <span style="color:#e6db74">&#34;Hello, World!&#34;</span>)
    })
    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Start</span>(<span style="color:#e6db74">&#34;:1323&#34;</span>))
}

<span style="color:#75715e">// A function to be wrapped. No need to change it&#39;s arguments due to tracing
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">slowFunc</span>(<span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span>) {
	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">200</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Millisecond</span>)
	<span style="color:#66d9ef">return</span>
}
</code></pre></div><h3 id="createchildspan">CreateChildSpan<a href="#createchildspan" class="hanchor" ariaLabel="Anchor"> 🔗</a> </h3>
<p>For more control over the Span, the function <code>CreateChildSpan</code> can be called
giving control on data to be appended to the span like log messages, baggages and tags.</p>
<p><em>Usage</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;github.com/labstack/echo-contrib/jaegertracing&#34;</span>
    <span style="color:#e6db74">&#34;github.com/labstack/echo/v4&#34;</span>
)
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">e</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">echo</span>.<span style="color:#a6e22e">New</span>()
    <span style="color:#75715e">// Enable tracing middleware
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">jaegertracing</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">e</span>, <span style="color:#66d9ef">nil</span>)
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Close</span>()
    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">GET</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">echo</span>.<span style="color:#a6e22e">Context</span>) <span style="color:#66d9ef">error</span> {
        <span style="color:#75715e">// Do something before creating the child span
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">40</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Millisecond</span>)
        <span style="color:#a6e22e">sp</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">jaegertracing</span>.<span style="color:#a6e22e">CreateChildSpan</span>(<span style="color:#a6e22e">c</span>, <span style="color:#e6db74">&#34;Child span for additional processing&#34;</span>)
        <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">Finish</span>()
        <span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">LogEvent</span>(<span style="color:#e6db74">&#34;Test log&#34;</span>)
        <span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">SetBaggageItem</span>(<span style="color:#e6db74">&#34;Test baggage&#34;</span>, <span style="color:#e6db74">&#34;baggage&#34;</span>)
        <span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">SetTag</span>(<span style="color:#e6db74">&#34;Test tag&#34;</span>, <span style="color:#e6db74">&#34;New Tag&#34;</span>)
        <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">100</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Millisecond</span>)
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">String</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">StatusOK</span>, <span style="color:#e6db74">&#34;Hello, World!&#34;</span>)
    })
    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Logger</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">Start</span>(<span style="color:#e6db74">&#34;:1323&#34;</span>))
}
</code></pre></div><p><em>References</em>:</p>
<ul>
<li>Opentracing Library: <a href="https://github.com/opentracing/opentracing-go">https://github.com/opentracing/opentracing-go</a></li>
<li>Jaeger configuration: <a href="https://github.com/jaegertracing/jaeger-client-go#environment-variables">https://github.com/jaegertracing/jaeger-client-go#environment-variables</a></li>
</ul>

            </section>
            <footer>
              Caught a mistake?
              <a 
                href="https://github.com/labstack/echox/blob/master/website/content/middleware/jaegertracing.md">
                <i class="far fa-edit"></i> Edit this page on GitHub!
              </a>
              <hr>
              <h2>
                <a href="https://github.com/labstack/echo/discussions">Forum</a> ✧
                <a href="https://gitter.im/labstack/echo">Chat</a>
              </h2>
            </footer>
          </article>
        </div>
      </div>
	    <footer class="w3-content w3-container w3-padding-48 w3-center footer">
  <p>
    <strong>Echo</strong> by <a href="https://labstack.com">LabStack</a> © 2021 LabStack
  </p>
  <p>
    <a class="icon" href="https://labstack.com/blog">
      <i class="fas fa-rss"></i>
    </a>
    <a class="icon" href="https://github.com/labstack">
      <i class="fab fa-github"></i>
    </a>
    <a class="icon" href="https://facebook.com/labstack">
      <i class="fab fa-facebook-f"></i>
    </a>
    <a class="icon" href="https://twitter.com/labstack">
      <i class="fab fa-twitter"></i>
    </a>
    <a class="icon" href="mailto:hello@labstack.com?Subject=Hello" target="_top">
      <i class="far fa-envelope"></i>
    </a>
  </p>
</footer>
<script type="text/javascript" src="https://unpkg.com/docsearch.js@2.2.1/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: '69dfc65b57ccba29ec34b68aa5b274ed',
  indexName: 'labstack',
  inputSelector: '#search-box'
});
</script>
<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
<script src="https://cdn.labstack.com/scripts/prism.js"></script>
<script src="https://cdn.labstack.com/scripts/base.js"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-85059636-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </div>
  </div>
</body>
</html>
