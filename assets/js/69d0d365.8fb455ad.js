"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2014],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>f});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),d=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},s=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),c=d(r),p=o,f=c["".concat(l,".").concat(p)]||c[p]||m[p]||i;return r?n.createElement(f,a(a({ref:t},s),{},{components:r})):n.createElement(f,a({ref:t},s))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=p;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u[c]="string"==typeof e?e:o,a[1]=u;for(var d=2;d<i;d++)a[d]=r[d];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},4051:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>i,metadata:()=>u,toc:()=>d});var n=r(7462),o=(r(7294),r(3905));const i={description:"Timeout middleware"},a="Timeout",u={unversionedId:"middleware/timeout",id:"middleware/timeout",title:"Timeout",description:"Timeout middleware",source:"@site/docs/middleware/timeout.md",sourceDirName:"middleware",slug:"/middleware/timeout",permalink:"/docs/middleware/timeout",draft:!1,editUrl:"https://github.com/labstack/echox/blob/master/website/docs/middleware/timeout.md",tags:[],version:"current",frontMatter:{description:"Timeout middleware"},sidebar:"docsSidebar",previous:{title:"Static",permalink:"/docs/middleware/static"},next:{title:"Trailing Slash",permalink:"/docs/middleware/trailing-slash"}},l={},d=[{value:"Usage",id:"usage",level:2},{value:"Custom Configuration",id:"custom-configuration",level:2},{value:"Usage",id:"usage-1",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Default Configuration*",id:"default-configuration",level:3}],s={toc:d},c="wrapper";function m(e){let{components:t,...r}=e;return(0,o.kt)(c,(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"timeout"},"Timeout"),(0,o.kt)("p",null,"Timeout middleware is used to timeout at a long running operation within a predefined period."),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"e.Use(middleware.Timeout())\n")),(0,o.kt)("h2",{id:"custom-configuration"},"Custom Configuration"),(0,o.kt)("h3",{id:"usage-1"},"Usage"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'e := echo.New()\ne.Use(middleware.TimeoutWithConfig(middleware.TimeoutConfig{\n  Skipper:                     middleware.DefaultSkipper,\n  ErrorMessage:                "custom timeout error message returns to client",\n  OnTimeoutRouteErrorHandler:  func(err error, c echo.Context) {\n    log.Println(c.Path())\n  },\n  Timeout:                     30*time.Second,\n}))\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"OnTimeoutRouteErrorHandler")," is an error handler that is executed for error that was returned from wrapped route after request timeouted and we already had sent the error code (503) and message response to the client."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"OnTimeoutRouteErrorHandler func(err error, c echo.Context)\n")),(0,o.kt)("p",null,"Note: do not write headers/body inside this handler. The response has already been sent to the client and response writer\nwill not accept anything no more. handler in the previous example will log the actual route middleware timeouted."),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},"// TimeoutConfig defines the config for Timeout middleware.\nTimeoutConfig struct {\n  // Skipper defines a function to skip middleware.\n  Skipper Skipper\n\n  // ErrorMessage is written to response on timeout in addition to http.StatusServiceUnavailable (503) status code\n  ErrorMessage string\n\n  // OnTimeoutRouteErrorHandler is an error handler that is executed for error that was returned from wrapped route after\n  // request timeouted and we already had sent the error code (503) and message response to the client.\n  OnTimeoutRouteErrorHandler func(err error, c echo.Context)\n\n  // Timeout configures a timeout for the middleware, defaults to 0 for no timeout\n  Timeout time.Duration\n}\n")),(0,o.kt)("h3",{id:"default-configuration"},"Default Configuration*"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go"},'// DefaultTimeoutConfig is the default Timeout middleware config.\nDefaultTimeoutConfig = TimeoutConfig{\n  Skipper:      DefaultSkipper,\n  Timeout:      0,\n  ErrorMessage: "",\n  // Note that OnTimeoutRouteErrorHandler will be nil\n}\n')))}m.isMDXComponent=!0}}]);